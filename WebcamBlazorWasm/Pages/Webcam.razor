@page "/webcam"

@inject IJSRuntime JSRuntime

<article>

    <h1>Hello web Camera from SinjulMSBH .. !!!!</h1>

    <section>
        <canvas id="@options.CanvasId" 
                width="@options.Width"
                height="@options.Height">
        </canvas>
    </section>

    <section>
        <img id="photo" alt="The screen capture will appear in this box ..">
    </section>

    <section class="mt-2">
        <button class="btn btn-primary" 
                @onclick="Start"
        >
                Start
        </button>

        <button class="btn btn-info ml-2"
                @onclick="TakePicture"
        >       Take photo
        </button>
    </section>

    <section>
        <video
            id="@options.VideoId"
            width="@options.Width" 
            height="@options.Height"
        >
               Video stream not available .. !!!!
        </video>
    </section>

</article>

@code{

    WebCamOptions options = new WebCamOptions() 
    { 
        CanvasId = "canvas",
        VideoId = "video",
        PhotoId = "photo",
    };

    protected override void OnInitialized()
    {
        options.Width = 480;
        options.Height = 360;

        options.VideoEnable = true;
        options.AudioEnable = false;

        options.Filter = 
            $" brightness(200%)" +
            $" contrast(130%)" +
            $" sepia(0.8)" +  
            $" blur(1px)" +
            $" saturate(170%)" 
        ;

        @*options.Filter = 
            $"brightness(2)" +
            $" contrast(1.3)" +
            $" sepia(0.4)" +
            $" blur(4px)" +
            $" saturate(170%)" +
            $" hue-rotate(170deg)" +
            $" drop-shadow(13px 13px 8px black)" +
            $" grayscale(85%)" +
            $" hue-rotate(80deg)" +
            $" invert(80%)" +
            $" opacity(40%)" 
        ;*@

    }

    public async Task Start()
    {
        await JSRuntime.InvokeVoidAsync("WebCamFunctions.start", options);
    }

    public async Task TakePicture()
    {
        await JSRuntime.InvokeVoidAsync("WebCamFunctions.takePicture");
    }

}